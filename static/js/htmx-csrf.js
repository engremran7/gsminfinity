(()=>{(function(){"use strict";if(window.__HTMX_CSRF_LOADER__)return;window.__HTMX_CSRF_LOADER__=!0;function c(e){try{if(!document.cookie)return null;let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let o=t[n].trim();if(o.startsWith(e+"="))return decodeURIComponent(o.substring(e.length+1))}}catch(t){console.debug("htmx-csrf: cookie parsing failed:",t)}return null}function i(){if(window.AppUI&&"function"==typeof window.AppUI.getCsrfToken){const e=window.AppUI.getCsrfToken();if(e)return e}try{let e=document.querySelector('meta[name="csrf-token"]')||document.querySelector('meta[name="csrfmiddlewaretoken"]')||document.querySelector('meta[name="X-CSRFToken"]');return e?e.content:null}catch(e){return console.debug("htmx-csrf: meta token read error:",e),null}}function d(e){try{if(!e||!e.detail||!e.detail.headers){console.debug("htmx-csrf: ignored malformed event");return}let t=e.detail.headers,n=c("csrftoken")||i();if(!n){console.warn("htmx-csrf WARNING: No CSRF token available (cookie & meta missing)");return}t["X-CSRFToken"]=n,t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),e.detail.headers=t}catch(t){console.debug("htmx-csrf: CSRF attach failed:",t)}}function r(){try{if(!document.body){document.addEventListener("DOMContentLoaded",r);return}document.body.addEventListener("htmx:configRequest",d)}catch(e){console.error("htmx-csrf: listener registration failed:",e)}}r()})();})();
