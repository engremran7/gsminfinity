{% extends "base.html" %}
{% load static %}

{% block title %}Home - {{ site_settings.site_name|default:"Site" }}{% endblock %}

{% block content %}
<section class="py-16 bg-white text-center">
  <div class="container mx-auto px-4 space-y-4">
    <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900">
      Welcome to {{ site_settings.site_name|default:"Site" }}
    </h1>
    <p class="text-slate-600 text-lg">
      Django {{ django_version }} · Python {{ python_version }} · {{ now|date:"M j, Y, P" }}
    </p>
    {% if not request.user.is_authenticated %}
      <div class="mt-6 flex justify-center gap-3">
        <a href="{% url 'account_login' %}" class="btn-primary px-5 py-3 rounded-md text-white">
          Sign in
        </a>
        <a href="{% url 'account_signup' %}" class="btn-outline px-5 py-3 rounded-md">
          Create account
        </a>
      </div>
    {% endif %}

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mt-12">
      <div class="bg-white shadow-md rounded-xl p-6 text-center border border-slate-100">
        <h3 class="text-3xl font-bold text-slate-900">
          {{ total_users|default:"-" }}
        </h3>
        <p class="text-slate-600 text-sm mt-1">Total users</p>
      </div>

      <div class="bg-white shadow-md rounded-xl p-6 text-center border border-slate-100">
        <h3 class="text-3xl font-bold text-slate-900">
          {{ active_devices|default:"-" }}
        </h3>
        <p class="text-slate-600 text-sm mt-1">Active devices</p>
      </div>

      <div class="bg-white shadow-md rounded-xl p-6 text-center border border-slate-100">
        <h3 class="text-3xl font-bold text-slate-900">
          {{ unread_notifications|default:"-" }}
        </h3>
        <p class="text-slate-600 text-sm mt-1">Unread notifications</p>
      </div>

      <div class="bg-white shadow-md rounded-xl p-6 text-center border border-slate-100">
        <h3 class="text-3xl font-bold text-slate-900">
          {{ active_announcements|default:"-" }}
        </h3>
        <p class="text-slate-600 text-sm mt-1">Active announcements</p>
      </div>
    </div>
  </div>
</section>

<section class="container mx-auto mt-12 px-4">
  <h2 class="text-2xl font-bold mb-6 text-slate-900">Recent announcements</h2>

  {% if announcements %}
    <div class="space-y-4">
      {% for a in announcements %}
        <div class="bg-white border border-slate-200 p-5 rounded-xl shadow-sm">
          <h5 class="text-xl font-semibold text-slate-900">
            {{ a.title|default:"(untitled)" }}
          </h5>
          <p class="text-slate-500 text-sm">{{ a.created_at|date:"M d, Y" }}</p>
          <p class="text-slate-700 mt-2">{{ a.message|truncatechars:200 }}</p>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="bg-blue-50 text-blue-800 border border-blue-200 p-4 rounded-lg">
      No announcements available.
    </div>
  {% endif %}
</section>

<div id="consent-banner-slot"></div>
{% endblock %}
